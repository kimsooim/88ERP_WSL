## 88ERP 오프라인사업 자동화 페이지 최종 완성
날짜: 2025-07-01 16:23
작업자: Ann & Claude Code

### 개요
웹대시보드 오프라인사업 > 자동화 페이지 UI/UX 개발 최종 완성
- 거래처별 자동화 워크플로우 시각화 구현
- 실시간 진행 상태 표시 및 단계별 정보 표시
- 레이아웃 최적화 및 사용성 개선

### 최종 레이아웃 구조

#### 1. 카드 헤더 영역
```
[거래처명] [준비됨] [12개 지점]                    [상태] [시작] [중지] [새로고침] [설정]
일일 매출 이메일 자동 발송
```

#### 2. 지점 정보 (해당시)
```
[안성점] [제주점] 등 세부 지점 표시
```

#### 3. 마지막 실행 & 데이터 경로
```
마지막 실행: 2025-07-01 09:00                     \\ds920\2bot\2aland\input
```

#### 4. 워크플로우 진행 바
```
[===비즈패션 데이터 다운===] [===엑셀 데이터 분석===] [===이메일 발송===] [===Supabase 전송===]
        1440행                   abc123.xlsx           ann@88toy.co.kr          540행
```

#### 5. 하단 정보
```
[일일 자동화] [세금계산서 역발행]                   진행률: 100% • 수집: 12/12개 지점 • 소요시간: 8초
```

### 주요 기능 구현

#### 1. 거래처별 자동화 설정
- **에이랜드**: 일일매출/월말매출 분리 (\\ds920\2bot\2aland\input)
- **교보문고**: 일일매출/월말매출 분리 (\\ds920\2bot\kyobo\daily, monthly)
- **일상의틈**: 메일 첨부파일 자동 처리 (\\ds920\2bot\ilsang\mail_attachments)
- **기타 거래처**: 모닝글로리, 닷밀, 네모네, 현대/롯데백화점 등

#### 2. 워크플로우 단계별 정보
- **비즈패션 데이터 다운**: 지점수 × 120행 표시
- **엑셀 데이터 분석**: 생성된 파일명 표시
- **이메일 발송**: 수신자 이메일 (ann@88toy.co.kr)
- **Supabase 전송**: 지점수 × 45행 표시
- **NAS 데이터 저장**: 지점수 × 80행 표시

#### 3. UI/UX 개선사항
- 2열 그리드 레이아웃
- 버튼 항상 표시 (비활성화 상태 구분)
- 상태 표시 버튼 앞쪽 배치 (레이아웃 안정화)
- 고정 높이 설정으로 콘텐츠 이동 방지
- 데이터 경로 오른쪽 정렬
- 진행률 정보 카드 하단 오른쪽 배치

#### 4. 색상 및 스타일
- 완료 상태: 파란색 (기존 녹색에서 변경)
- 비활성 버튼: bg-gray-100 text-gray-400
- 활성 버튼: 기존 색상 유지
- 진행 바: 파란색 애니메이션

### 기술 구현 세부사항

#### 1. State 관리
```typescript
const [runningWorkflows, setRunningWorkflows] = useState({});
// 워크플로우별 상태: running, completed, stopped
// 수집 정보: collectedBranches, totalBranches
// 파일 정보: fileName
```

#### 2. 레이아웃 구조
- flex justify-between으로 좌우 정렬
- flex-1로 왼쪽 콘텐츠 확장
- 고정 너비(w-20) 상태 표시
- h-12 고정 높이로 레이아웃 안정화

#### 3. 조건부 렌더링
- store.status === 'ready'일 때만 버튼 표시
- workflow 상태에 따른 버튼 활성화/비활성화
- 지점수 > 1일 때만 수집 정보 표시

### 향후 작업 계획

1. **n8n 워크플로우 연동**
   - Rocky VM (192.168.32.128:5679) 연결
   - 템플릿 A, B, C 구현
   - 실제 데이터 처리

2. **추가 기능 개발**
   - 파일 경로 클릭 시 클립보드 복사
   - 실시간 데이터 업데이트
   - 워크플로우 로그 상세 보기
   - 거래처별 커스텀 설정

3. **성능 최적화**
   - 대량 데이터 처리 시 페이지네이션
   - 워크플로우 상태 캐싱
   - 애니메이션 성능 개선

### 파일 위치
/home/sp1/88ERP/projects/web-dashboard/app/(dashboard)/offline/automation/page.tsx

### Git 커밋 정보
- 커밋 메시지: "Add: 오프라인사업 자동화 페이지 UI 완성 - 거래처별 워크플로우 시각화"
- GitHub: https://github.com/kimsooim/88ERP_WSL